<p id="notice"><%= notice %></p>

  <% if user_signed_in? %>
    <% if @post.watched_by?(current_user) %>
      <%= link_to watch_path(@post.watch_of(current_user)), method: :delete, class: "btn btn-default" do %>
      Unwatch
      <% end %>
    <% else %>
      <%= link_to post_watches_path(@post), class: "btn btn-success", method: :post do %>
       Watch
      <% end %>
    <% end %>

    <%= link_to watches_path, class: "btn btn-default" do %>
     Your Watched Posts (<%= @number_watched %>)
    <% end %>

    <div class="well"> (VIC: THIS PART CAN BE REMOVED FROM THIS POST SHOW PAGE. WE REALLY ONLY NEED IT FOR USER PANEL PAGE) <br>You want these kinds of items:
      <% current_user.desired_tags.each do |p| %>
        <%= p.name %> |
      <% end %>
    </div>
  <% end %>

<p>
  <strong>Title:</strong>
  <%= @post.title %>
</p>

<div class="well well-sm">
  <%= @watcher_number %> watching
</div>

<div class="well"> This post has these tags:
  <% @post.tags.each do |p| %>
    <%= p.name %> |
  <% end %>
</div>

<p>
  <strong>Description:</strong>
  <%= @post.description %>
</p>

<p>
  <strong>Category:</strong>
  <%= @post.category %>
</p>

<p>
  <strong>Value:</strong>
  <%= @post.value %>
</p>

<p>
  <strong>Posted by User:</strong>
  <%= @post.user.name %>
</p>

<p>
  <strong>Location:</strong>
  <%= @post.location %>
</p>

<p>
  <strong>Exchanging with:</strong>
  <%= @post.working_request_id %>
</p>

<p>
  <strong>Duration:</strong>
  <%= @post.duration %>
</p>

<p>
  <strong>Time:</strong>
  <%= @post.time %>
</p>

<%= link_to 'Edit', edit_post_path(@post) %> |
<%= link_to 'Back', posts_path %>

<div>
  <% if user_signed_in? && @post.liked_by?(current_user) %>
    <%= link_to "Unlike", like_path(@post.like_of(current_user)), method: :delete %>
  <% else %>
    <%= link_to "Like", post_likes_path(@post), class: "icon-big", method: :post %>
  <% end %>
</div>

<div class="well well-sm">
  <% if @likes_number == 1 %>
    1 like
  <% else %>
    <%= @likes_number %> likes
  <% end %>
</div>

<% if user_signed_in? %>
  <h2>Like it? Request an Exchange!</h2>
  <%= simple_form_for([@post, @request]) do |f| %>
    <% if @request.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@request.errors.count, "error") %> prohibited this exchange request from being saved:</h2>

        <ul>
        <% @request.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

      <%= f.input :title %>
      <b>Offer one of your items in exchange:</b>
      <%= f.select :offer, @bigarray, label: "feixue" %>
      <%= f.input :message %>
      <%= f.button :submit, value: "Send Request!", class: "btn btn-primary"%>
  <% end %>

  <%= link_to "All requests(test) of this post", post_requests_path(@post) %>
<% end %>
